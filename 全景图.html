<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>显示全景控件</title>
</head>
<style type="text/css">
            body,
            html {
                width: 100%;
                height: 100%;
                margin: 0;
                font-family: "微软雅黑";
            }
            
            #allmap {
                width: 100%;
                height: 100%;
            }
            
            p {
                margin-left: 5px;
                font-size: 14px;
            }
        </style>
<body>
    <div id="allmap"></div>
    <p>在地图上添加全景控件，点击全景控件进入全景图</p>
</body>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=GgBzQDEo8aW1VxmGRF73toYvt1aDtMVw"></script>
</html>
<script>
window.navigator.geolocation.getCurrentPosition(function(data) {
            var map = new BMap.Map("allmap");
            var point = new BMap.Point(data.coords.longitude, data.coords.latitude);
            map.centerAndZoom(point, 17);
            console.log(data)
              map.enableScrollWheelZoom(true); 
    map.addTileLayer(new BMap.PanoramaCoverageLayer());

    var stCtrl = new BMap.PanoramaControl(); //构造全景控件
    stCtrl.setOffset(new BMap.Size(20, 20));
    map.addControl(stCtrl); //添加全景控件
        }, function(err) {})
  
  
</script>